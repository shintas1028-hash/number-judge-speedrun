# 今後の改修プラン (Future Development Plans)

このドキュメントでは、次期バージョン（v1.1以降）で予定されている改修内容と、その実装方針についてまとめます。

## 1. スマートフォン対応（レスポンシブデザイン）

現状のPC向けレイアウトを、スマートフォンでも快適に遊べるように最適化します。

### 現状の課題
- 画面幅が狭いと要素が重なったり、はみ出したりする
- ボタンが小さすぎてタップしにくい可能性がある
- 横画面・縦画面の制御がされていない

### 実装プラン
1.  **ビューポート設定の確認**
    - `index.html` の meta viewport 設定を確認し、ズームを抑制する（誤操作防止）。
2.  **CSSメディアクエリの導入**
    - `src/styles/GameScreen.module.css` 等にスマホ用（例: `max-width: 768px`）のスタイルを追加。
3.  **レイアウトの変更**
    - **縦画面時**:
        - 上部: タイマー・スコア
        - 中央: 問題文（条件）
        - 下部: カードエリア（グリッド配置を調整、例: 2列x3行）
    - **文字サイズの調整**: スマホでも読みやすいサイズ（16px以上）に拡大。
    - **ボタンサイズ**: タップしやすい大きさ（44px以上）に拡大。
4.  **タッチ操作の最適化**
    - `hover` エフェクトをタップ時の挙動に調整。

---

## 2. タイトルBGMの自動再生問題の解決

ブラウザのセキュリティポリシーにより、ユーザーの操作なしに音声（BGM）を流すことがブロックされる問題を解決します。

### 現状の課題
- 初回アクセス時、ユーザーが何もクリックしていない状態ではBGMが再生されない。
- Chromeなどのブラウザポリシーによる制限。

### 実装プラン
1.  **「Click to Start」オーバーレイの導入**
    - サイトにアクセスした直後、画面全体を覆う「画面をタップしてスタート」のようなオーバーレイを表示する。
    - ユーザーがそのオーバーレイをクリック/タップしたタイミングで、`audioContext` を再開し、BGM再生を開始する。
2.  **実装イメージ**
    ```tsx
    // GameScreen.tsx
    const [hasInteracted, setHasInteracted] = useState(false);

    const handleFirstInteraction = () => {
        audioManager.resumeContext(); // AudioContextの再開
        audioManager.playBGM('title');
        setHasInteracted(true);
    };

    if (!hasInteracted) {
        return <div onClick={handleFirstInteraction}>TAP TO START</div>;
    }
    ```

---

## 3. ゲームバランス・レベル調整

難易度ごとの制限時間やカード枚数を見直し、より遊びごたえのあるバランスに調整します。

### 現状の課題
- 最上級（Master）の難易度が高すぎる、または制限時間が厳しすぎる可能性がある。
- 逆に初級が簡単すぎる場合もある。

### 実装プラン
1.  **設定値の外部化（定数ファイル調整）**
    - `src/game/store.ts` 内の `DIFFICULTY_SETTINGS` を調整する。
2.  **調整案**
    - **Master**:
        - 制限時間: 45秒 → **60秒** に緩和
        - カード枚数: 6枚（変更なし）
        - ペナルティ: -5秒 → **-3秒** に緩和
    - **Advanced**:
        - 制限時間: 50秒 → **60秒** に緩和
3.  **新機能: 動的な難易度調整（オプション案）**
    - 正解数に応じて残り時間が少し回復するボーナスタイム機能の追加検討。
    - 連続正解（コンボ）でスコア倍率アップ。

---

## バージョンアップ作業の流れ（Git使用）

今後の開発は以下のフローで行うことを推奨します。

1.  **最新コードの取得**
    ```bash
    git pull origin main
    ```
2.  **作業用ブランチの作成**
    ```bash
    git checkout -b feature/mobile-support  # 例: スマホ対応の場合
    ```
3.  **コードの修正・開発**
4.  **変更の保存（コミット）**
    ```bash
    git add .
    git commit -m "スマホレイアウトの調整"
    ```
5.  **GitHubへプッシュ**
    ```bash
    git push origin feature/mobile-support
    ```
6.  **プルリクエスト作成 & マージ**（GitHub上で操作）
    - `main` ブランチにマージされると、自動的にVercelにデプロイされます。

---
